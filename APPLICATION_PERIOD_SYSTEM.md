
# üïê –°–∏—Å—Ç–µ–º–∞ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫

## üìã –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã](#–æ–±–∑–æ—Ä-—Å–∏—Å—Ç–µ–º—ã)
2. [–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ](#—Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ-—Ä–µ—à–µ–Ω–∏–µ)
3. [–ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö](#–º–æ–¥–µ–ª—å-–¥–∞–Ω–Ω—ã—Ö)
4. [Backend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è](#backend-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
5. [Frontend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è](#frontend-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
6. [API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã](#api-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã)
7. [–ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏](#–ø–ª–∞–Ω-—Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)
8. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
9. [–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å](#–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)

---

## üéØ –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

### –¶–µ–ª—å
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–æ–º —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å.

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥–∞ –≤–Ω–µ –ø–µ—Ä–∏–æ–¥–∞
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –≤—Å–µ—Ö –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞—Ö

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ
**–í–∞—Ä–∏–∞–Ω—Ç 1: –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã `application_settings` —Å JSON-–Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–µ—Ä–∏–æ–¥–∞.

---

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã
1. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –ø–µ—Ä–∏–æ–¥ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
2. **Middleware** –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–µ—Ä–∏–æ–¥–∞ –Ω–∞ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ
3. **Frontend** –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
4. **API** –±–ª–æ–∫–∏—Ä—É–µ—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é/–≤—Ö–æ–¥ –≤–Ω–µ –ø–µ—Ä–∏–æ–¥–∞

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ              Admin Panel                        ‚îÇ
‚îÇ         (–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–æ–º)                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ            Application Settings                  ‚îÇ
‚îÇ              (PostgreSQL)                       ‚îÇ
‚îÇ        {start_date, end_date}                   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Application Period Middleware            ‚îÇ
‚îÇ           (–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–∏–æ–¥–∞)                    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                      ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Auth Routes                           ‚îÇ
‚îÇ    (register, login, protected routes)          ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üóÑÔ∏è –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö

### application_settings
```sql
CREATE TABLE application_settings (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  setting_key VARCHAR(255) UNIQUE NOT NULL,
  setting_value JSONB NOT NULL,
  updated_by_id UUID REFERENCES users(id),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### Prisma Schema
```prisma
model ApplicationSettings {
  id           String   @id @default(uuid())
  settingKey   String   @unique
  settingValue Json
  updatedById  String
  updatedBy    User     @relation(fields: [updatedById], references: [id])
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@map("application_settings")
}
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –Ω–∞—Å—Ç—Ä–æ–µ–∫
```json
{
  "start_date": "2025-01-01T00:00:00.000Z",
  "end_date": "2025-02-01T23:59:59.999Z",
  "is_active": true,
  "message": "–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫: 1 —è–Ω–≤–∞—Ä—è - 1 —Ñ–µ–≤—Ä–∞–ª—è 2025"
}
```

---

## üîß Backend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. Settings Service
```typescript
// backend/src/services/settingsService.ts
import { prisma } from '../config/database';

export interface ApplicationPeriodSettings {
  start_date: string;
  end_date: string;
  is_active: boolean;
  message: string;
}

export class SettingsService {
  // –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
  async getApplicationSettings(): Promise<ApplicationPeriodSettings | null> {
    const setting = await prisma.applicationSettings.findUnique({
      where: { settingKey: 'application_period' }
    });
    
    return setting ? setting.settingValue as ApplicationPeriodSettings : null;
  }

  // –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞
  async updateApplicationSettings(
    startDate: string,
    endDate: string,
    adminId: string
  ): Promise<ApplicationPeriodSettings> {
    const settings: ApplicationPeriodSettings = {
      start_date: startDate,
      end_date: endDate,
      is_active: true,
      message: `–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫: ${new Date(startDate).toLocaleDateString('ru-RU')} - ${new Date(endDate).toLocaleDateString('ru-RU')}`
    };

    await prisma.applicationSettings.upsert({
      where: { settingKey: 'application_period' },
      update: {
        settingValue: settings,
        updatedById: adminId,
        updatedAt: new Date()
      },
      create: {
        settingKey: 'application_period',
        settingValue: settings,
        updatedById: adminId
      }
    });

    return settings;
  }

  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–µ—Ä–∏–æ–¥–∞
  async isApplicationPeriodActive(): Promise<{
    isActive: boolean;
    message?: string;
    settings?: ApplicationPeriodSettings;
  }> {
    const settings = await this.getApplicationSettings();
    
    if (!settings || !settings.is_active) {
      return {
        isActive: false,
        message: '–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω'
      };
    }

    const now = new Date();
    const startDate = new Date(settings.start_date);
    const endDate = new Date(settings.end_date);

    if (now < startDate) {
      return {
        isActive: false,
        message: `–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–∞—á–Ω–µ—Ç—Å—è ${startDate.toLocaleDateString('ru-RU')}`,
        settings
      };
    }

    if (now > endDate) {
      return {
        isActive: false,
        message: `–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è ${endDate.toLocaleDateString('ru-RU')}`,
        settings
      };
    }

    return {
      isActive: true,
      settings
    };
  }
}
```

### 2. Settings Controller
```typescript
// backend/src/controllers/settingsController.ts
import { Request, Response } from 'express';
import { SettingsService } from '../services/settingsService';
import { z } from 'zod';

const settingsService = new SettingsService();

const updateSettingsSchema = z.object({
  start_date: z.string().datetime(),
  end_date: z.string().datetime()
});

export class SettingsController {
  // GET /api/settings/application-period
  async getApplicationSettings(req: Request, res: Response) {
    try {
      const settings = await settingsService.getApplicationSettings();
      const periodStatus = await settingsService.isApplicationPeriodActive();
      
      res.json({
        success: true,
        data: {
          settings,
          periodStatus
        }
      });
    } catch (error) {
      res.status(500).json({
        success: false,
        message: '–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫'
      });
    }
  }

  // PUT /api/settings/application-period
  async updateApplicationSettings(req: Request, res: Response) {
    try {
      const { start_date, end_date } = updateSettingsSchema.parse(req.body);
      const adminId = req.user?.id;

      if (!adminId) {
        return res.status(401).json({
          success: false,
          message: '–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω'
        });
      }

      const startDate = new Date(start_date);
      const endDate = new Date(end_date);

      if (startDate >= endDate) {
        return res.status(400).json({
          success: false,
          message: '–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–Ω—å—à–µ –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è'
        });
      }

      const settings = await settingsService.updateApplicationSettings(
        start_date,
        end_date,
        adminId
      );

      res.json({
        success: true,
        data: settings,
        message: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã'
      });
    } catch (error) {
      if (error instanceof z.ZodError) {
        return res.status(400).json({
          success: false,
          message: '–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ',
          errors: error.errors
        });
      }

      res.status(500).json({
        success: false,
        message: '–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫'
      });
    }
  }
}
```

### 3. Application Period Middleware
```typescript
// backend/src/middleware/applicationPeriod.ts
import { Request, Response, NextFunction } from 'express';
import { SettingsService } from '../services/settingsService';

const settingsService = new SettingsService();

export const checkApplicationPeriod = async (
  req: Request,
  res: Response,
  next: NextFunction
) => {
  try {
    const periodStatus = await settingsService.isApplicationPeriodActive();
    
    if (!periodStatus.isActive) {
      return res.status(403).json({
        success: false,
        message: periodStatus.message || '–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω',
        periodStatus
      });
    }

    req.periodSettings = periodStatus.settings;
    next();
  } catch (error) {
    res.status(500).json({
      success: false,
      message: '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–∏–æ–¥–∞'
    });
  }
};

// Middleware —Ç–æ–ª—å–∫–æ –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏/–≤—Ö–æ–¥–∞
export const checkApplicationPeriodForAuth = async (
  req: Request,
  res: Response,
  next: NextFunction
) => {
  try {
    const periodStatus = await settingsService.isApplicationPeriodActive();
    
    if (!periodStatus.isActive) {
      return res.status(403).json({
        success: false,
        message: periodStatus.message || '–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã',
        periodStatus,
        code: 'APPLICATION_PERIOD_INACTIVE'
      });
    }

    next();
  } catch (error) {
    res.status(500).json({
      success: false,
      message: '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–∏–æ–¥–∞'
    });
  }
};
```

### 4. Settings Routes
```typescript
// backend/src/routes/settings.ts
import { Router } from 'express';
import { SettingsController } from '../controllers/settingsController';
import { auth } from '../middleware/auth';
import { adminAuth } from '../middleware/adminAuth';

const router = Router();
const settingsController = new SettingsController();

// GET /api/settings/application-period
router.get('/application-period', settingsController.getApplicationSettings);

// PUT /api/settings/application-period (admin only)
router.put('/application-period', auth, adminAuth, settingsController.updateApplicationSettings);

export default router;
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Auth Routes
```typescript
// backend/src/routes/auth.ts - –¥–æ–±–∞–≤–∏—Ç—å middleware
import { checkApplicationPeriodForAuth } from '../middleware/applicationPeriod';

// –ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤—Ö–æ–¥—É
router.post('/register', checkApplicationPeriodForAuth, authController.register);
router.post('/login', checkApplicationPeriodForAuth, authController.login);
```

---

## üé® Frontend —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### 1. Settings Composable
```typescript
// composables/useSettings.ts
export const useSettings = () => {
  const { $fetch } = useNuxtApp();

  interface ApplicationPeriodSettings {
    start_date: string;
    end_date: string;
    is_active: boolean;
    message: string;
  }

  interface PeriodStatus {
    isActive: boolean;
    message?: string;
    settings?: ApplicationPeriodSettings;
  }

  // –ü–æ–ª—É—á–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞
  const getApplicationSettings = async () => {
    try {
      const response = await $fetch('/api/settings/application-period');
      return response.data;
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
      throw error;
    }
  };

  // –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ (admin only)
  const updateApplicationSettings = async (startDate: string, endDate: string) => {
    try {
      const response = await $fetch('/api/settings/application-period', {
        method: 'PUT',
        body: {
          start_date: startDate,
          end_date: endDate
        }
      });
      return response.data;
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
      throw error;
    }
  };

  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–µ—Ä–∏–æ–¥–∞
  const checkApplicationPeriod = async (): Promise<PeriodStatus> => {
    try {
      const data = await getApplicationSettings();
      return data.periodStatus;
    } catch (error) {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–∏–æ–¥–∞:', error);
      return {
        isActive: false,
        message: '–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–∏–æ–¥–∞'
      };
    }
  };

  return {
    getApplicationSettings,
    updateApplicationSettings,
    checkApplicationPeriod
  };
};
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Admin Panel
```vue
<!-- pages/admin.vue - –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –≤–∫–ª–∞–¥–∫—É -->
<template>
  <div class="admin-panel">
    <!-- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≤–∫–ª–∞–¥–∫–∏ -->
    <div class="tabs">
      <button 
        v-for="tab in tabs" 
        :key="tab.id"
        :class="{ active: activeTab === tab.id }"
        @click="activeTab = tab.id"
      >
        {{ tab.name }}
      </button>
    </div>

    <!-- –í–∫–ª–∞–¥–∫–∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
    <div v-if="activeTab === 'settings'" class="tab-content">
      <div class="settings-panel">
        <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫</h2>
        
        <div class="current-status">
          <div class="status-card" :class="statusClass">
            <h3>–¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å</h3>
            <p>{{ currentStatus.message }}</p>
            <div v-if="currentStatus.settings" class="period-info">
              <p><strong>–ù–∞—á–∞–ª–æ:</strong> {{ formatDate(currentStatus.settings.start_date) }}</p>
              <p><strong>–û–∫–æ–Ω—á–∞–Ω–∏–µ:</strong> {{ formatDate(currentStatus.settings.end_date) }}</p>
            </div>
          </div>
        </div>

        <form @submit.prevent="updateSettings" class="settings-form">
          <div class="form-group">
            <label for="start-date">–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
            <input
              id="start-date"
              v-model="form.startDate"
              type="datetime-local"
              required
            />
          </div>

          <div class="form-group">
            <label for="end-date">–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
            <input
              id="end-date"
              v-model="form.endDate"
              type="datetime-local"
              required
            />
          </div>

          <button type="submit" :disabled="isLoading" class="btn-primary">
            {{ isLoading ? '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ...' : '–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏' }}
          </button>
        </form>
      </div>
    </div>
  </div>
</template>

<script setup lang="ts">
// ... existing code ...

const { updateApplicationSettings, getApplicationSettings } = useSettings();

const form = reactive({
  startDate: '',
  endDate: ''
});

const currentStatus = ref({
  isActive: false,
  message: '',
  settings: null
});

const isLoading = ref(false);

// –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
const loadSettings = async () => {
  try {
    const data = await getApplicationSettings();
    currentStatus.value = data.periodStatus;
    
    if (data.settings) {
      form.startDate = data.settings.start_date.slice(0, 16);
      form.endDate = data.settings.end_date.slice(0, 16);
    }
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
  }
};

// –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
const updateSettings = async () => {
  isLoading.value = true;
  try {
    const startDate = new Date(form.startDate).toISOString();
    const endDate = new Date(form.endDate).toISOString();
    
    await updateApplicationSettings(startDate, endDate);
    await loadSettings();
    
    // –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—Ö–µ
    alert('–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª–µ–Ω—ã');
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫:', error);
    alert('–û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫');
  } finally {
    isLoading.value = false;
  }
};

// –í—ã—á–∏—Å–ª—è–µ–º—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞
const statusClass = computed(() => ({
  'status-active': currentStatus.value.isActive,
  'status-inactive': !currentStatus.value.isActive
}));

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('ru-RU', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  });
};

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
onMounted(() => {
  loadSettings();
});

// –î–æ–±–∞–≤–∏—Ç—å 'settings' –≤ tabs
const tabs = [
  { id: 'stats', name: '–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞' },
  { id: 'applications', name: '–ó–∞—è–≤–∫–∏' },
  { id: 'users', name: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏' },
  { id: 'templates', name: '–®–∞–±–ª–æ–Ω—ã' },
  { id: 'settings', name: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏' }
];
</script>

<style scoped>
.settings-panel {
  max-width: 800px;
  margin: 0 auto;
}

.current-status {
  margin-bottom: 2rem;
}

.status-card {
  padding: 1.5rem;
  border-radius: 8px;
  border: 2px solid;
}

.status-active {
  border-color: #10b981;
  background-color: #f0fdf4;
  color: #065f46;
}

.status-inactive {
  border-color: #ef4444;
  background-color: #fef2f2;
  color: #991b1b;
}

.settings-form {
  background: white;
  padding: 2rem;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

.form-group {
  margin-bottom: 1.5rem;
}

.form-group label {
  display: block;
  margin-bottom: 0.5rem;
  font-weight: 500;
}

.form-group input {
  width: 100%;
  padding: 0.75rem;
  border: 1px solid #d1d5db;
  border-radius: 4px;
  font-size: 1rem;
}

.period-info {
  margin-top: 1rem;
  padding-top: 1rem;
  border-top: 1px solid #e5e7eb;
}

.period-info p {
  margin: 0.25rem 0;
}
</style>
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Login Page
```vue
<!-- pages/login.vue - –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–∏–æ–¥–∞ -->
<script setup lang="ts">
// ... existing code ...

const { checkApplicationPeriod } = useSettings();

const periodStatus = ref({
  isActive: true,
  message: ''
});

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
onMounted(async () => {
  try {
    const status = await checkApplicationPeriod();
    periodStatus.value = status;
  } catch (error) {
    console.error('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–∏–æ–¥–∞:', error);
  }
});
</script>

<template>
  <div class="login-page">
    <!-- –ë–ª–æ–∫ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–µ—Ä–∏–æ–¥–µ -->
    <div v-if="!periodStatus.isActive" class="period-notice">
      <div class="notice-content">
        <h2>–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –Ω–µ–∞–∫—Ç–∏–≤–µ–Ω</h2>
        <p>{{ periodStatus.message }}</p>
        <div class="notice-actions">
          <NuxtLink to="/" class="btn-secondary">
            –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é
          </NuxtLink>
        </div>
      </div>
    </div>

    <!-- –§–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞ (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–µ—Ä–∏–æ–¥ –∞–∫—Ç–∏–≤–µ–Ω) -->
    <div v-else class="login-form">
      <!-- –°—É—â–µ—Å—Ç–≤—É—é—â–∞—è —Ñ–æ—Ä–º–∞ –ª–æ–≥–∏–Ω–∞ -->
    </div>
  </div>
</template>

<style scoped>
.period-notice {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.notice-content {
  background: white;
  padding: 3rem;
  border-radius: 12px;
  text-align: center;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
  max-width: 500px;
}

.notice-content h2 {
  color: #ef4444;
  margin-bottom: 1rem;
}

.notice-content p {
  color: #6b7280;
  margin-bottom: 2rem;
  line-height: 1.6;
}
</style>
```

---

## üîå API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

### Settings Endpoints

#### GET /api/settings/application-period
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫

**–û—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "data": {
    "settings": {
      "start_date": "2025-01-01T00:00:00.000Z",
      "end_date": "2025-02-01T23:59:59.999Z",
      "is_active": true,
      "message": "–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫: 1 —è–Ω–≤–∞—Ä—è - 1 —Ñ–µ–≤—Ä–∞–ª—è 2025"
    },
    "periodStatus": {
      "isActive": true,
      "settings": { ... }
    }
  }
}
```

#### PUT /api/settings/application-period
**–û–ø–∏—Å–∞–Ω–∏–µ**: –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ (admin only)

**–ó–∞–≥–æ–ª–æ–≤–∫–∏**: `Authorization: Bearer <token>`

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**:
```json
{
  "start_date": "2025-01-01T00:00:00.000Z",
  "end_date": "2025-02-01T23:59:59.999Z"
}
```

**–û—Ç–≤–µ—Ç**:
```json
{
  "success": true,
  "data": {
    "start_date": "2025-01-01T00:00:00.000Z",
    "end_date": "2025-02-01T23:59:59.999Z",
    "is_active": true,
    "message": "–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫: 1 —è–Ω–≤–∞—Ä—è - 1 —Ñ–µ–≤—Ä–∞–ª—è 2025"
  },
  "message": "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–∏–æ–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã"
}
```

### –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ Auth Endpoints

#### POST /api/auth/register
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫

**–û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ**:
```json
{
  "success": false,
  "message": "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞",
  "periodStatus": {
    "isActive": false,
    "message": "–ü–µ—Ä–∏–æ–¥ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫ –∑–∞–≤–µ—Ä—à–∏–ª—Å—è 1 —Ñ–µ–≤—Ä–∞–ª—è 2025",
    "settings": { ... }
  },
  "code": "APPLICATION_PERIOD_INACTIVE"
}
```

#### POST /api/auth/login
**–ò–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–∏–æ–¥–∞ –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫

**–û—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ**: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ register

---

## üìã –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 1: Backend Foundation (–î–µ–Ω—å 1)

#### 1.1 –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
```bash
cd backend
npx prisma migrate dev --name add_application_settings_table
```

#### 1.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Prisma Schema
- –î–æ–±–∞–≤–∏—Ç—å –º–æ–¥–µ–ª—å `ApplicationSettings`
- –î–æ–±–∞–≤–∏—Ç—å —Å–≤—è–∑—å —Å `User`

#### 1.3 –†–µ–∞–ª–∏–∑–∞—Ü–∏—è Services
- ‚úÖ –°–æ–∑–¥–∞—Ç—å `SettingsService`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–∏–æ–¥–∞

#### 1.4 –°–æ–∑–¥–∞–Ω–∏–µ Controllers
- ‚úÖ –°–æ–∑–¥–∞—Ç—å `SettingsController`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é

#### 1.5 –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Routes
- ‚úÖ –°–æ–∑–¥–∞—Ç—å `/api/settings/*` routes
- ‚úÖ –ü–æ–¥–∫–ª—é—á–∏—Ç—å middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

### –≠—Ç–∞–ø 2: Backend Integration (–î–µ–Ω—å 2)

#### 2.1 –°–æ–∑–¥–∞–Ω–∏–µ Middleware
- ‚úÖ –°–æ–∑–¥–∞—Ç—å `applicationPeriod.ts` middleware
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–∏–æ–¥–∞
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é

#### 2.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Auth
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å auth routes
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–∏–æ–¥–∞ –≤ register/login
- ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å middleware –¥–ª—è –∑–∞—â–∏—â–µ–Ω–Ω—ã—Ö routes

#### 2.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Backend
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫
curl -X GET http://localhost:3001/api/settings/application-period

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ (admin)
curl -X PUT http://localhost:3001/api/settings/application-period \
  -H "Authorization: Bearer <admin-token>" \
  -H "Content-Type: application/json" \
  -d '{"start_date":"2025-01-01T00:00:00.000Z","end_date":"2025-02-01T23:59:59.999Z"}'

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
curl -X POST http://localhost:3001/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}'
```

### –≠—Ç–∞–ø 3: Frontend Admin Panel (–î–µ–Ω—å 3)

#### 3.1 –°–æ–∑–¥–∞–Ω–∏–µ Composable
- ‚úÖ –°–æ–∑–¥–∞—Ç—å `useSettings.ts`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥—ã API
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é

#### 3.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Admin Panel
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∫–ª–∞–¥–∫—É "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
- ‚úÖ –°–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–∏–æ–¥–æ–º
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é

#### 3.3 –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –°–æ–∑–¥–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å responsive –¥–∏–∑–∞–π–Ω
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å loading —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –≠—Ç–∞–ø 4: Frontend User Experience (–î–µ–Ω—å 4)

#### 4.1 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Login Page
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–∏–æ–¥–∞
- ‚úÖ –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –°–∫—Ä—ã—Ç—å —Ñ–æ—Ä–º—É –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º –ø–µ—Ä–∏–æ–¥–µ

#### 4.2 –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Middleware
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `auth.ts`
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç—ã
- ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã

#### 4.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Frontend
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
- ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Backend Tests

#### Unit Tests
```typescript
// backend/src/tests/settingsService.test.ts
describe('SettingsService', () => {
  test('should get application settings', async () => {
    // Test implementation
  });

  test('should update application settings', async () => {
    // Test implementation
  });

  test('should check application period correctly', async () => {
    // Test implementation
  });
});
```

#### Integration Tests
```typescript
// backend/src/tests/settings.integration.test.ts
describe('Settings API', () => {
  test('GET /api/settings/application-period', async () => {
    // Test implementation
  });

  test('PUT /api/settings/application-period (admin)', async () => {
    // Test implementation
  });
});
```

### Frontend Tests

#### Component Tests
```typescript
// tests/admin-settings.test.ts
describe('Admin Settings', () => {
  test('should display current period status', () => {
    // Test implementation
  });

  test('should update period settings', () => {
    // Test implementation
  });
});
```

### Manual Testing Scenarios

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–∏–æ–¥–∞
1. –í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—ã –Ω–∞—á–∞–ª–∞ –∏ –æ–∫–æ–Ω—á–∞–Ω–∏—è
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –≤ –±—É–¥—É—â–µ–º
2. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
4. –í–µ—Ä–Ω—É—Ç—å –ø–µ—Ä–∏–æ–¥ –≤ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ò—Å—Ç–µ—á–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∞
1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥ –≤ –ø—Ä–æ—à–ª–æ–º
2. –ü–æ–ø—ã—Ç–∞—Ç—å—Å—è –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–ª–æ–∫–∏—Ä–æ–≤–∫—É —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º
4. –û–±–Ω–æ–≤–∏—Ç—å –ø–µ—Ä–∏–æ–¥
5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞—Ç
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —á—Ç–æ start_date < end_date
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### –ó–∞—â–∏—Ç–∞ API
- ‚úÖ JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ Admin-only –¥–æ—Å—Ç—É–ø –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—é
- ‚úÖ Rate limiting –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ Graceful degradation –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ë–î
- ‚úÖ –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- ‚úÖ Fallback –Ω–∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### Audit Log
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ SettingsService
async logSettingsChange(adminId: string, oldSettings: any, newSettings: any) {
  // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
  console.log(`Settings changed by admin ${adminId}`, {
    old: oldSettings,
    new: newSettings,
    timestamp: new Date()
  });
}
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –õ–æ–≥–∏
- –ò–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–µ—Ä–∏–æ–¥–∞
- –ü–æ–ø—ã—Ç–∫–∏ –¥–æ—Å—Ç—É–ø–∞ –≤–Ω–µ –ø–µ—Ä–∏–æ–¥–∞
- –û—à–∏–±–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–∏–æ–¥–∞

### –ú–µ—Ç—Ä–∏–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
- –ß–∞—Å—Ç–æ—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–µ—Ä–∏–æ–¥–∞

### –ê–ª–µ—Ä—Ç—ã
- –û—à–∏–±–∫–∏ –≤ –ø—Ä–æ–≤–µ—Ä–∫–µ –ø–µ—Ä–∏–æ–¥–∞
- –ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

---

## üöÄ Deployment

### Environment Variables
```env
# –î–æ–±–∞–≤–∏—Ç—å –≤ backend/.env
APPLICATION_PERIOD_ENABLED=true
DEFAULT_TIMEZONE=Asia/Almaty
```

### Database Migration
```bash
# Production migration
npm run prisma:migrate:deploy
```

### Health Check
```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ health check
app.get('/health', async (req, res) => {
  const periodStatus = await settingsService.isApplicationPeriodActive();
  
  res.json({
    status: 'ok',
    timestamp: new Date(),
    applicationPeriod: periodStatus
  });
});
```

---

## üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è
1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã**: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞—è–≤–æ–∫
2. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–∞—á–∞–ª–µ/–æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–µ—Ä–∏–æ–¥–∞
3. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø–µ—Ä–∏–æ–¥–∞–º –ø–æ–¥–∞—á–∏ –∑–∞—è–≤–æ–∫
4. **–®–∞–±–ª–æ–Ω—ã –ø–µ—Ä–∏–æ–¥–æ–≤**: –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã
5. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º**: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è–º–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```typescript
// backend/src/config/application.ts
export const APPLICATION_CONFIG = {
  DEFAULT_PERIOD_DAYS: 30,
  MAX_PERIOD_DAYS: 365,
  MIN_PERIOD_HOURS: 1,
  TIMEZONE: 'Asia/Almaty'
};
```

---

**üìÖ –°–æ–∑–¥–∞–Ω–æ**: 2025-01-01
**üë§ –ü—Ä–æ–µ–∫—Ç**: Business Qoldau 2025
**üåê –î–æ–º–µ–Ω**: businessqoldau.kz
**üìã –°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
```