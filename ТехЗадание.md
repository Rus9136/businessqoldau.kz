
=

## 1) Цель

Быстро запустить сайт по примеру shesnext.kz: лендинг + странички с правилами, контактами и политикой, плюс один общий кабинет для подачи заявок.

---

## 1.1) Быстрый старт

### Backend
```bash
cd backend
npm install
npm run dev  # Запуск на http://localhost:3001
```

**Проверка:**
- `curl http://localhost:3001/health` - health check
- `curl http://localhost:3001/api` - API информация

**База данных:** PostgreSQL `businesscamp` уже настроена и работает

### Frontend
```bash
npm install
npm run dev  # Запуск на http://localhost:3000
```

---

## 2) Технологии

### Frontend
* ✅ **SSR Framework**: Nuxt 3
* ✅ **Styling**: Tailwind CSS
* ✅ **i18n**: @nuxtjs/i18n (русский/казахский)
* ✅ **Контент**: @nuxt/content (Markdown для «Правил» и «Политики»)
* ⚠️ **Аналитика**: Google Analytics 4 - не подключена

### Backend (в разработке)
* ✅ **API Server**: Node.js + Express
* ⚠️ **База данных**: PostgreSQL (схема готова, требуется создание БД)
* ✅ **ORM**: Prisma
* ⚠️ **Аутентификация**: JWT + bcrypt (middleware готов, требуются endpoints)
* ✅ **Загрузка файлов**: Multer (установлен, требуется реализация)
* ✅ **Email**: Nodemailer (установлен, требуется настройка)
* ✅ **Валидация**: Zod

### Деплой
* ⚠️ **Frontend**: Vercel - не задеплоено
* ❌ **Backend**: VPS (DigitalOcean/Hetzner) или Railway/Render
* ❌ **База данных**: Managed PostgreSQL или на VPS
* ❌ **Файлы**: Локальное хранилище на VPS или S3-compatible сервис

---

## 3) Страницы

### Публичные

* ✅ `/` — главная: баннер, этапы, призовой фонд, кнопка «Подать заявку». ⚠️ Таймер статичный, отзывы не добавлены.
* ✅ `/how-to-apply` — пошаговая инструкция.
* ✅ `/terms` — правила участия (Markdown).
* ✅ `/contacts` — форма обратной связи (Имя, Email, Сообщение). ⚠️ Не сохраняет в БД.
* ✅ `/privacy` — политика конфиденциальности (Markdown).

### Кабинет

* ✅ `/app` — личный кабинет: форма заявки + статус.
* ✅ Форма заявки (UI готов):

  * ✅ ФИО, телефон, email, город, категория (3 варианта).
  * ✅ Краткое описание бизнеса.
  * ⚠️ Загрузка бизнес-плана (PDF до 20 МБ) - валидация есть, загрузка не реализована.
  * ⚠️ Загрузка видео (MP4 до 300 МБ) - валидация есть, загрузка не реализована.
  * ✅ Чекбокс «Согласен с правилами».
* ✅ Статус: «Черновик» или «Отправлено». После отправки заявка заблокирована для редактирования. ⚠️ Логика готова, не подключена к БД.

---

## 4) Модель данных (минимум)

❌ **Требует создания в PostgreSQL**

**users**
* id (UUID, PK)
* email (unique)
* password_hash
* email_verified (boolean)
* created_at
* updated_at

**profiles**
* id (UUID, PK)
* user_id (UUID, FK → users.id)
* full_name
* phone
* city
* created_at
* updated_at

**applications**
* id (UUID, PK)
* user_id (UUID, FK → users.id)
* category (enum: 'starter', 'active', 'it')
* summary (text)
* plan_file_path (varchar)
* video_file_path (varchar)
* status (enum: 'draft', 'submitted')
* created_at
* updated_at

**contacts**
* id (UUID, PK)
* name (varchar)
* email (varchar)
* message (text)
* created_at

---

## 5) Функционал

### Аутентификация
* ⚠️ Регистрация по email + пароль - UI готов, требует backend API
* ⚠️ Вход по email + пароль - UI готов, требует backend API
* ❌ Подтверждение email (отправка токена)
* ❌ Восстановление пароля
* ❌ JWT токены (access + refresh)
* ❌ Middleware для защиты роутов на backend

### Заявки
* ⚠️ Заполнение заявки - UI готов, требует backend API
* ⚠️ Сохранение как черновик - UI готов, требует backend API
* ⚠️ Отправка заявки (статус → submitted) - UI готов, требует backend API
* ❌ Загрузка бизнес-плана (PDF до 20 МБ)
* ❌ Загрузка видео (MP4 до 300 МБ)
* ⚠️ Блокировка редактирования после отправки - логика UI готова, требует backend

### Контакты
* ⚠️ Форма обратной связи - UI готов, требует backend API
* ❌ Сохранение в БД
* ❌ Email уведомление администратору

### Администрирование
* ❌ Просмотр всех заявок (через прямой доступ к БД или простая админка)
* ❌ Изменение статуса заявок
* ❌ Просмотр контактных форм

---

## 6) UX/Дизайн

* ✅ Цвета: Синий primary (blue-600), белый фон, серый текст.
* ✅ Шрифт: Sans-serif (используется системный).
* ⚠️ Hero с таймером до даты Camp - Hero готов, таймер статичный placeholder.
* ✅ Карточки призового фонда и этапов.
* ✅ Кнопки CTA («Подать заявку», «Подробнее»).
* ✅ Мобильная адаптация (базовая реализация).

---

## 7) SEO/Аналитика

* ✅ SSR для всех страниц.
* ⚠️ Метатеги title/description - добавлены через useSeoMeta(), но только на русском.
* ⚠️ Sitemap.xml и robots.txt - не созданы.
* ⚠️ Подключение GA4 - не реализовано.

---

## 8) Деплой и окружения

### Frontend (Nuxt 3)
* ⚠️ Vercel или Netlify - не задеплоено
* Переменные окружения:
  * `NUXT_PUBLIC_API_URL` - URL backend API

### Backend (Node.js)
* ❌ VPS (DigitalOcean/Hetzner) с PM2/Docker или Railway/Render
* Переменные окружения:
  * `DATABASE_URL` - PostgreSQL connection string
  * `JWT_SECRET` - секретный ключ для JWT
  * `JWT_REFRESH_SECRET` - секретный ключ для refresh токенов
  * `SMTP_HOST`, `SMTP_PORT`, `SMTP_USER`, `SMTP_PASS` - для отправки email
  * `UPLOAD_DIR` - директория для загруженных файлов
  * `MAX_FILE_SIZE_PDF` - лимит для PDF (20MB)
  * `MAX_FILE_SIZE_VIDEO` - лимит для видео (300MB)
  * `ADMIN_EMAIL` - email администратора для уведомлений
  * `FRONTEND_URL` - URL фронтенда (для CORS)

### База данных
* ❌ PostgreSQL - managed (AWS RDS, DigitalOcean) или на VPS
* ❌ Миграции через Prisma/TypeORM
* ❌ Бэкапы

---

## 9) Критерии готовности

### Frontend
1. ⚠️ Все публичные страницы открываются, двуязычность работает - страницы готовы, i18n настроен, требуется тестирование.
2. ⚠️ Сайт адаптивный (desktop/mobile) - базовая адаптация реализована, требуется детальное тестирование.
3. ❌ Таймер работает и считает до заданной даты - статичный placeholder.
4. ❌ Интеграция с backend API завершена.

### Backend
5. ❌ API для регистрации/входа работает, JWT токены выдаются.
6. ❌ Email подтверждение работает.
7. ❌ Пользователь может создать и отправить заявку (план + видео).
8. ❌ Загрузка файлов (PDF, MP4) работает с валидацией размера.
9. ❌ После отправки редактирование закрыто на уровне API.
10. ❌ Контактная форма сохраняется в БД и отправляет email администратору.

### Деплой
11. ❌ Frontend задеплоен на Vercel/Netlify.
12. ❌ Backend задеплоен на VPS/Railway.
13. ❌ PostgreSQL настроен и работает.
14. ❌ Домен подключен, SSL работает.
15. ❌ GA4 подключен.

---

## 10) Этапы реализации Backend

### Этап 1: Настройка окружения и БД (1-2 дня)
✅ **Шаг 1.1**: Создать отдельную директорию `backend/` в проекте или отдельный репозиторий
✅ **Шаг 1.2**: Инициализировать Node.js проект (`npm init`)
✅ **Шаг 1.3**: Установить зависимости:
  - Express (веб-фреймворк) ✅
  - Prisma (ORM) ✅
  - bcrypt (хеширование паролей) ✅
  - jsonwebtoken (JWT) ✅
  - dotenv (переменные окружения) ✅
  - cors (CORS политика) ✅
  - helmet (безопасность) ✅
  - multer (загрузка файлов) ✅
  - nodemailer (отправка email) ✅
  - zod (валидация) ✅

✅ **Шаг 1.4**: Настроить PostgreSQL:
  - Использован локальный PostgreSQL ✅
  - Создана база данных `businesscamp` ✅
  - Создан пользователь `businesscamp` с правами ✅
  - Docker Compose конфигурация добавлена (опционально) ✅

✅ **Шаг 1.5**: Настроить ORM:
  - Создать `prisma/schema.prisma` ✅
  - Определить модели: users, profiles, applications, contacts ✅
  - Запустить миграции ✅
  - Prisma Client сгенерирован ✅

✅ **Шаг 1.6**: Создать базовую структуру проекта:
```
backend/
├── src/
│   ├── config/         # Конфигурация (database, jwt, email)
│   ├── middleware/     # Middleware (auth, error handler, validation)
│   ├── routes/         # API роуты
│   ├── controllers/    # Контроллеры
│   ├── services/       # Бизнес-логика
│   ├── models/         # Модели/схемы (если TypeORM)
│   ├── utils/          # Утилиты (jwt, email, file upload)
│   └── index.ts        # Точка входа
├── uploads/            # Загруженные файлы
├── .env.example
├── .env
├── package.json
└── tsconfig.json
```

### Этап 2: Аутентификация (2-3 дня)
❌ **Шаг 2.1**: API эндпоинты для auth:
  - `POST /api/auth/register` - регистрация
  - `POST /api/auth/login` - вход
  - `POST /api/auth/refresh` - обновление токена
  - `POST /api/auth/logout` - выход
  - `POST /api/auth/forgot-password` - восстановление пароля
  - `POST /api/auth/reset-password` - сброс пароля
  - `POST /api/auth/verify-email` - подтверждение email

❌ **Шаг 2.2**: Реализовать middleware для проверки JWT токенов

❌ **Шаг 2.3**: Настроить отправку email (подтверждение, восстановление пароля)

❌ **Шаг 2.4**: Интегрировать фронтенд с auth API:
  - Обновить `pages/login.vue`
  - Создать composable `useAuth()`
  - Настроить хранение токенов (localStorage/cookies)
  - Обновить middleware `middleware/auth.ts`

### Этап 3: Профили пользователей (1 день)
❌ **Шаг 3.1**: API эндпоинты для профилей:
  - `GET /api/profile` - получить свой профиль
  - `PUT /api/profile` - обновить профиль
  - `POST /api/profile` - создать профиль

❌ **Шаг 3.2**: Интегрировать с фронтендом

### Этап 4: Заявки (3-4 дня)
❌ **Шаг 4.1**: API эндпоинты для заявок:
  - `GET /api/applications` - получить свои заявки
  - `GET /api/applications/:id` - получить заявку по ID
  - `POST /api/applications` - создать заявку
  - `PUT /api/applications/:id` - обновить заявку (только draft)
  - `POST /api/applications/:id/submit` - отправить заявку (draft → submitted)

❌ **Шаг 4.2**: Реализовать загрузку файлов:
  - Настроить multer для PDF (до 20MB) и видео (до 300MB)
  - Валидация типов файлов (mimetype)
  - Сохранение в `uploads/business-plans/` и `uploads/videos/`
  - Генерация уникальных имен файлов
  - Возврат путей к файлам в response

❌ **Шаг 4.3**: Реализовать логику статусов:
  - draft → можно редактировать
  - submitted → нельзя редактировать

❌ **Шаг 4.4**: Интегрировать с фронтендом:
  - Обновить `pages/app.vue`
  - Реализовать upload файлов через API
  - Обработка ошибок и прогресс загрузки

### Этап 5: Контактная форма (1 день)
❌ **Шаг 5.1**: API эндпоинт:
  - `POST /api/contacts` - отправить сообщение

❌ **Шаг 5.2**: Email уведомление администратору

❌ **Шаг 5.3**: Интегрировать с фронтендом (`pages/contacts.vue`)

### Этап 6: Администрирование (опционально, 2-3 дня)
❌ **Шаг 6.1**: Создать роль admin в таблице users

❌ **Шаг 6.2**: API для админов:
  - `GET /api/admin/applications` - все заявки
  - `GET /api/admin/applications/:id` - заявка по ID
  - `PUT /api/admin/applications/:id/status` - изменить статус
  - `GET /api/admin/contacts` - все контактные формы

❌ **Шаг 6.3**: Простая админ-панель на фронтенде (опционально) или доступ через БД

### Этап 7: Тестирование и безопасность (2-3 дня)
❌ **Шаг 7.1**: Добавить rate limiting (express-rate-limit)
❌ **Шаг 7.2**: Настроить CORS для production
❌ **Шаг 7.3**: Добавить валидацию всех входящих данных (Zod/Joi)
❌ **Шаг 7.4**: Обработка ошибок (глобальный error handler)
❌ **Шаг 7.5**: Логирование (winston/pino)
❌ **Шаг 7.6**: Unit/Integration тесты (Jest/Vitest)
❌ **Шаг 7.7**: Security аудит (helmet, SQL injection защита)

### Этап 8: Деплой (1-2 дня)
❌ **Шаг 8.1**: Настроить PostgreSQL на production
❌ **Шаг 8.2**: Задеплоить backend (VPS + PM2/Docker или Railway/Render)
❌ **Шаг 8.3**: Настроить nginx как reverse proxy (если VPS)
❌ **Шаг 8.4**: SSL сертификаты (Let's Encrypt)
❌ **Шаг 8.5**: Настроить переменные окружения
❌ **Шаг 8.6**: Запустить миграции на production
❌ **Шаг 8.7**: Настроить бэкапы БД
❌ **Шаг 8.8**: Обновить фронтенд с production API URL

---

## 11) Статус реализации

### ✅ Выполнено (Frontend):
- Nuxt 3 проект инициализирован
- Tailwind CSS настроен с кастомными утилитами
- i18n (русский/казахский) настроен
- Все страницы созданы с основным UI
- Layout с Header/Footer
- Роутинг и middleware для защиты маршрутов
- Базовые компоненты форм
- Markdown контент для правил и политики
- README.md с инструкциями
- CLAUDE.md для будущих разработчиков

### ⚠️ Требует завершения (Frontend):
- Интеграция с backend API
- Рабочий таймер обратного отсчета
- Локализация SEO метатегов
- Google Analytics 4
- Sitemap.xml и robots.txt

### ✅ Выполнено (Backend):
- ✅ **Этап 1 полностью завершен (1-2 дня)**
  - Структура проекта создана
  - Все зависимости установлены
  - PostgreSQL база данных настроена
  - Prisma миграции применены
  - Backend сервер работает на :3001
  - Git репозиторий инициализирован и запушен
  - Docker Compose конфигурация создана

### ❌ Не начато (Backend):
- ❌ Этап 2: Аутентификация (регистрация, вход, JWT, email верификация)
- ❌ Этап 3: Профили пользователей
- ❌ Этап 4: Заявки (CRUD + загрузка файлов)
- ❌ Этап 5: Контактная форма
- ❌ Этап 6: Администрирование
- ❌ Этап 7: Тестирование и безопасность
- ❌ Этап 8: Деплой backend

### Общая оценка времени:
- **✅ Этап 1 (завершен)**: 1-2 дня
- **Backend разработка (Этап 2-6)**: 10-16 дней (при работе 1 разработчика)
- **Интеграция с фронтендом**: 3-4 дня
- **Тестирование и деплой (Этап 7-8)**: 3-4 дня
- **Оставшееся время**: ~2.5-3 недели разработки

---

